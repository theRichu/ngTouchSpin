angular.module("jkuri.touchspin",[]).directive("ngTouchSpin",["$timeout","$interval",function(a,b){var c=function(e,d){e.min=d.min||0;e.max=d.max||100;e.step=d.step||1;e.prefix=d.prefix||undefined;e.postfix=d.postfix||undefined;e.decimals=d.decimals||0;e.stepInterval=d.stepInterval||100;e.stepIntervalDelay=d.stepIntervalDelay||500;e.initval=d.initval||"";e.val=d.value||e.initval};return{restrict:"EA",require:"?ngModel",scope:true,replace:true,link:function(l,g,j,f){c(l,j);var h,d,e=true,i=l.val,k;f.$setViewValue(l.val);l.decrement=function(){i=l.val;var m=parseFloat(parseFloat(Number(l.val))-parseFloat(l.step)).toFixed(l.decimals);if(m<l.min){m=parseFloat(l.min).toFixed(l.decimals);l.val=m;f.$setViewValue(m);return}l.val=m;f.$setViewValue(m)};l.increment=function(){i=l.val;var m=parseFloat(parseFloat(Number(l.val))+parseFloat(l.step)).toFixed(l.decimals);if(m>l.max){return}l.val=m;f.$setViewValue(m)};l.startSpinUp=function(){l.checkValue();l.increment();k=Date.now();l.stopSpin();a(function(){d=b(function(){l.increment()},l.stepInterval)},l.stepIntervalDelay)};l.startSpinDown=function(){l.checkValue();l.decrement();k=Date.now();var m=a(function(){d=b(function(){l.decrement()},l.stepInterval)},l.stepIntervalDelay)};l.stopSpin=function(){if(Date.now()-k>l.stepIntervalDelay){a.cancel(h);b.cancel(d)}else{a(function(){a.cancel(h);b.cancel(d)},l.stepIntervalDelay)}};l.checkValue=function(){var m;if(l.val!==""&&!l.val.match(/^-?(?:\d+|\d*\.\d+)$/i)){m=i!==""?parseFloat(i).toFixed(l.decimals):parseFloat(l.min).toFixed(l.decimals);l.val=m;f.$setViewValue(m)}};f.$render=function(){l.val=f.$viewValue}},template:'<div class="input-group">  <span class="input-group-btn" ng-show="!verticalButtons">    <button class="btn btn-default" ng-mousedown="startSpinDown()" ng-mouseup="stopSpin()"><i class="fa fa-minus"></i></button>  </span>  <span class="input-group-addon" ng-show="prefix" ng-bind="prefix"></span>  <input type="text" ng-model="val" class="form-control" ng-blur="checkValue()">  <span class="input-group-addon" ng-show="postfix" ng-bind="postfix"></span>  <span class="input-group-btn" ng-show="!verticalButtons">    <button class="btn btn-default" ng-mousedown="startSpinUp()" ng-mouseup="stopSpin()"><i class="fa fa-plus"></i></button>  </span></div>'}}]);